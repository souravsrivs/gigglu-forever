<script>

/* Wait until page fully loads */
window.onload = function(){

const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const mainSection = document.getElementById("mainSection");
const noMessage = document.getElementById("noMessage");
const journey = document.getElementById("journey");
const journeyText = document.getElementById("journeyText");
const toggleBtn = document.getElementById("toggleBtn");
const counter = document.getElementById("counter");
const music = document.getElementById("music");
const diamondContainer = document.getElementById("diamondContainer");

/* YES */
yesBtn.onclick = function(){
mainSection.style.display="none";
yesBtn.classList.add("glow");
confetti();
music.play().catch(()=>{}); // mobile safe
launchPhotos();
diamondContainer.style.display="block";
showJourney();
startCounter();
};

/* Confetti */
function confetti(){
for(let i=0;i<200;i++){
let c=document.createElement("div");
c.style.position="fixed";
c.style.width="6px";
c.style.height="6px";
c.style.background=["#ff2e63","#fff","#ffcc00"][Math.floor(Math.random()*3)];
c.style.left=Math.random()*100+"vw";
c.style.top=Math.random()*100+"vh";
c.style.zIndex="200";
document.body.appendChild(c);
c.animate(
[{transform:"translateY(0)",opacity:1},
 {transform:"translateY(300px)",opacity:0}],
{duration:2000}
);
setTimeout(()=>c.remove(),2000);
}
}

/* NO logic */
let noCount=0;
const lines=[
"Birokto ğŸ™„",
"Chup kore YES click koro ğŸ˜’",
"Eiii baal YES click koro ğŸ˜",
"Malkin YES ta click koro ğŸ˜Œ"
];

noBtn.onclick = function(e){
e.preventDefault();
noCount++;

if(noCount<8){
noBtn.style.position="absolute";
noBtn.style.left=Math.random()*80+"%";
noBtn.style.top=Math.random()*80+"%";
noMessage.innerHTML=lines[Math.floor(Math.random()*lines.length)];
noMessage.style.opacity="1";
setTimeout(()=>noMessage.style.opacity="0",2000);
}else{
document.body.classList.add("shake");
noBtn.classList.add("shatter");
setTimeout(()=>{
noBtn.style.display="none";
noMessage.innerHTML="Please click YES for Sondesh ğŸ¬";
noMessage.style.opacity="1";
},600);
}
};

/* Photos */
function launchPhotos(){
for(let i=1;i<=38;i++){
let img=document.createElement("img");
img.src="photo"+i+".jpg";
img.classList.add("photo");
document.body.appendChild(img);
img.onmouseenter=()=>focus(img);
img.onmouseleave=reset;
img.ontouchstart=()=>focus(img);
img.ontouchend=reset;
}
setTimeout(arrangePhotos,500);
}

function arrangePhotos(){
let photos=document.querySelectorAll(".photo");
let cols=6;
let spacingX=window.innerWidth/cols;
let spacingY=window.innerHeight/7;

photos.forEach((img,i)=>{
img.style.left=(i%cols)*spacingX+"px";
img.style.top=Math.floor(i/cols)*spacingY+"px";
});
}

function focus(sel){
document.querySelectorAll(".photo").forEach(p=>{
if(p!==sel)p.classList.add("dim");
});
sel.classList.add("zoom");
}

function reset(){
document.querySelectorAll(".photo").forEach(p=>{
p.classList.remove("dim","zoom");
});
}

/* Journey */
function showJourney(){
journey.style.display="block";
journey.classList.add("heartbeat");
setTimeout(()=>journey.style.opacity="1",100);

const text=`Jan 1, 2023 â€” The day everything began.

Through distance, chaos, growth and challenges â€”
we chose each other every single day.

Less meetings.
Busy year.
Interference.
Misunderstandings.

But we survived.
We grew.
We stayed.

This is intentional love.
And I still choose you.
Forever. â™¾ï¸â¤ï¸`;

let i=0;
journeyText.innerHTML="";

function type(){
if(i<text.length){
if(text.charAt(i)=="\n"){
journeyText.innerHTML+="<br>";
}else{
journeyText.innerHTML+=text.charAt(i);
}
i++;
setTimeout(type,25);
}
}
type();
}

/* Minimize */
toggleBtn.onclick = function(){
let content=document.getElementById("journeyContent");
if(content.style.display==="none"){
content.style.display="block";
toggleBtn.innerHTML="â€”";
}else{
content.style.display="none";
toggleBtn.innerHTML="+";
}
};

/* Counter */
function startCounter(){
const startDate=new Date("Jan 1, 2023 00:00:00").getTime();

setInterval(()=>{
let now=new Date().getTime();
let diff=now-startDate;

let years=Math.floor(diff/(1000*60*60*24*365));
diff-=years*(1000*60*60*24*365);
let months=Math.floor(diff/(1000*60*60*24*30));
diff-=months*(1000*60*60*24*30);
let days=Math.floor(diff/(1000*60*60*24));
diff-=days*(1000*60*60*24);
let hours=Math.floor(diff/(1000*60*60));
diff-=hours*(1000*60*60);
let minutes=Math.floor(diff/(1000*60));
diff-=minutes*(1000*60);
let seconds=Math.floor(diff/1000);

counter.innerHTML =
years+"y : "+months+"m : "+days+"d : "+
hours+"h : "+minutes+"m : "+seconds+"s â¤ï¸";

},1000);
}

}; // END window.onload

</script>
